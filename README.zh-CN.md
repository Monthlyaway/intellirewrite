# ğŸ“š IntelliRewriteï¼šAI æ™ºèƒ½æ–‡æœ¬é‡å†™å·¥å…·
 [![è®¸å¯è¯](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE) [![æ˜Ÿæ ‡æ•°](https://img.shields.io/github/stars/Monthlyaway/intellirewrite.svg)](https://github.com/Monthlyaway/intellirewrite/stargazers) [![é—®é¢˜åé¦ˆ](https://img.shields.io/github/issues/Monthlyaway/intellirewrite.svg)](https://github.com/Monthlyaway/intellirewrite/issues)
[English](README.md) | [ä¸­æ–‡](README.zh-CN.md)
## ğŸš€ é¡¹ç›®ç®€ä»‹
IntelliRewrite æ˜¯ä¸€æ¬¾å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œé€šè¿‡å¤§è¯­è¨€æ¨¡å‹å¸®åŠ©å­¦ç”Ÿã€ç ”ç©¶äººå‘˜å’Œå†™ä½œè€…åœ¨ä¿ç•™åŸæ„çš„å‰æä¸‹ä¼˜åŒ–æ–‡æœ¬å†…å®¹ã€‚å®ƒç‰¹åˆ«é€‚ç”¨äºï¼š
- ğŸ“ é‡å†™ç¬”è®°ä¸è®ºæ–‡
- ğŸ”„ æå‡æ–‡æœ¬æ¸…æ™°åº¦ä¸è¡Œæ–‡æµç•…åº¦
- ğŸ“š åˆ†æ®µå¤„ç†é•¿ç¯‡æ–‡æ¡£
- ğŸŒ é€šè¿‡å¯é…ç½®æ¥å£æ”¯æŒå¤š AI å¹³å°
### âœ¨ æ ¸å¿ƒåŠŸèƒ½
- **ä»»åŠ¡ç®¡ç†**ï¼šåŸºäºé˜Ÿåˆ—çš„å¤šä»»åŠ¡å¤„ç†ç³»ç»Ÿ
- **æ™ºèƒ½åˆ†å—**ï¼šå°†é•¿æ–‡æ¡£åˆ†å‰²ä¸ºæ˜“å¤„ç†ç‰‡æ®µ
- **è®°å¿†ä¸Šä¸‹æ–‡**ï¼šå¯é…ç½®çš„è®°å¿†åŠŸèƒ½ä¿æŒåˆ†å—é—´è¿è´¯æ€§
- **çµæ´» API æ”¯æŒ**ï¼šå…¼å®¹ OpenAI API
- **è¿›åº¦è¿½è¸ª**ï¼šå®æ—¶æ˜¾ç¤ºè¯¦ç»†å¤„ç†è¿›åº¦
- **æ–­ç‚¹ç»­ä¼ **ï¼šæ„å¤–ä¸­æ–­åå¯ç»§ç»­æœªå®Œæˆä»»åŠ¡
### ğŸ“ å­¦ç”Ÿä¸“ç”¨è®¾è®¡
ä¸“ä¸ºå­¦æœ¯åœºæ™¯ä¼˜åŒ–ï¼š
- **å­¦ä¹ ç¬”è®°**ï¼šé‡å¡‘ç¬”è®°ç»“æ„æå‡ç†è§£
- **è®ºæ–‡ä¼˜åŒ–**ï¼šä¿æŒåŸæ„çš„è´¨é‡å‡çº§
- **ç ”ç©¶æ–‡çŒ®**ï¼šå­¦æœ¯é•¿æ–‡æ¡£åˆ†æ®µå¤„ç†
- **è¯­è¨€å­¦ä¹ **ï¼šé€šè¿‡ AI æ”¹å†™è§‚å¯Ÿè¯­è¨€è¡¨è¾¾æŠ€å·§
### ğŸŒ å¤šå¹³å° API æ”¯æŒ
å…¼å®¹ä»»æ„ OpenAI æ ¼å¼ APIï¼š
- **è‡ªå®šä¹‰æ¥å£**ï¼šè‡ªç”±é…ç½® API åŸºåœ°å€
- **å¤šæ¨¡å‹æ”¯æŒ**ï¼šå…¼å®¹ OpenAIã€DeepSeek ç­‰å¤šä¸ªå¹³å°ï¼Œå¬è¯´ Deepseek-R1 å…·å¤‡æ¨ç†èƒ½åŠ›ï¼Ÿå½“ç„¶ï¼IntelliRewrite å®Œç¾é€‚é…ã€‚
## ğŸ”„ å·¥ä½œæµç¨‹æ¼”ç¤º
### ğŸ­ å®é™…åº”ç”¨åœºæ™¯
å‡è®¾ä½ çš„çº¿æ€§ä»£æ•°æ•™æˆå¸ƒç½®äº†å…³äº"ç‰¹å¾å€¼ä¸ç‰¹å¾å‘é‡"çš„ç¬¬ä¸‰ã€å››ç« â€”â€”å°±æ˜¯è®©çŸ©é˜µçªç„¶æ‹¥æœ‰"ä¸ªæ€§"ã€å‘é‡è·å¾—"ç‰¹æ®Šå¾…é‡"çš„é‚£éƒ¨åˆ†å†…å®¹ã€‚
ä½ ï¼š*ç›¯ç€æ•™æ* "ç­‰ç­‰ï¼Œä»–ä»¬æ˜¯æ€ä¹ˆä»ç¬¬äºŒæ­¥ç›´æ¥è·³åˆ°ç¬¬ä¸ƒæ­¥çš„ï¼Ÿæˆ‘æ¼çœ‹äº†å››é¡µå—ï¼Ÿ"
**IntelliRewrite æ¥æ‹¯æ•‘ï¼š**
1. **æå–è½¬æ¢**
   ä½¿ç”¨ [MinerU](https://github.com/opendatalab/MinerU) å°† PDF è½¬ä¸º Markdown
2. **é˜Ÿåˆ—æ·»åŠ **
   ```bash
   python -m chapter_rewriter.cli add-task linear_algebra_ch3.md --chunk-size 800
   python -m chapter_rewriter.cli add-task linear_algebra_ch4.md --chunk-size 800
   ```
3. **é€šå®µå¤„ç†**
   ```bash
   python -m chapter_rewriter.cli process-tasks
   ```
4. **æ¸…æ™¨æ”¶è·**
   æ‰“å¼€ `output/linear_algebra_ch3_rewritten.md` å’Œ `output/linear_algebra_ch4_rewritten.md`ï¼Œæ”¶è·å±•ç¤ºå®Œæ•´æ¨å¯¼è¿‡ç¨‹ã€è§£é‡Šç‰¹å¾å€¼ç°å®æ„ä¹‰çš„æ¸…æ™°ç‰ˆæœ¬ï¼
   å†ä¹Ÿä¸è§"æ˜¾ç„¶å¯å¾—..."ä½†å®é™…è®©äººæ‘¸ä¸ç€å¤´è„‘çš„è·³è·ƒæ¨å¯¼ï¼
### æ ‡å‡†å¤„ç†æµç¨‹
1. **æ·»åŠ ä»»åŠ¡**
   å°†æ–‡æ¡£åŠ å…¥å¤„ç†é˜Ÿåˆ—ï¼š
   ```bash
   python -m chapter_rewriter.cli add-task document1.md
   python -m chapter_rewriter.cli add-task document2.txt
   ```
2. **æŸ¥çœ‹é˜Ÿåˆ—**
   æŸ¥çœ‹å¾…å¤„ç†ä»»åŠ¡ï¼š
   ```bash
   python -m chapter_rewriter.cli list-tasks
   ```
   è¾“å‡ºç¤ºä¾‹ï¼š
   ```
   ä»»åŠ¡ID | çŠ¶æ€     | è¿›åº¦    | æ–‡ä»¶
   ----------------------------------------
   1      | å¾…å¤„ç†   | 0%      | document1.md
   2      | é˜Ÿåˆ—ä¸­   | 0%      | document2.txt
   ```
3. **å¯åŠ¨å¤„ç†**
   å¼€å§‹ AI é‡å†™ï¼š
   ```bash
   python -m chapter_rewriter.cli process-tasks
   ```
   å®æ—¶è¿›åº¦ï¼š
   ```
   å¤„ç† document1.md [â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡] 40%
   å½“å‰åˆ†å—ï¼š12/30 (1024 å­—ç¬¦)
   ```
è¾“å‡ºæ–‡ä»¶å­˜æ”¾äº `output` æ–‡ä»¶å¤¹
### æµç¨‹ç‰¹è‰²
- **æ‰¹é‡å¤„ç†**ï¼šå…ˆæ·»åŠ å¤šä¸ªæ–‡ä»¶å†ç»Ÿä¸€å¤„ç†ï¼ˆæ–¹ä¾¿è…¾å‡ºæ—¶é—´ç¤¾äº¤ï¼‰
- **ä¼˜å…ˆçº§é˜Ÿåˆ—**ï¼šæŒ‰æ·»åŠ é¡ºåºå¤„ç†ï¼ˆè®°å¾—æå‰å……å€¼ API é¢åº¦ï¼‰
- **è¿›åº¦ä¿å­˜**ï¼šè‡ªåŠ¨æ¢å¤ä¸­æ–­ä»»åŠ¡ï¼Œä»»åŠ¡çŠ¶æ€åŒ…æ‹¬ï¼šå¾…å¤„ç†ã€å¤„ç†ä¸­ã€å·²å®Œæˆã€å¤±è´¥ã€‚å¾…å¤„ç†å’Œå¤„ç†ä¸­ä»»åŠ¡ä¼šè‡ªåŠ¨ç»­æ¥
## ğŸ”§ åˆ†å—å¤§å°é…ç½®
é€šè¿‡ `--chunk-size` å‚æ•°æ§åˆ¶åˆ†å—å­—ç¬¦æ•°ï¼ˆé token æ•°ï¼‰ï¼Œä¼˜åŒ–å¤§è¯­è¨€æ¨¡å‹å¤„ç†æ•ˆæœï¼š
**é»˜è®¤å€¼**ï¼š800 å­—ç¬¦
### ä¸ºä½•ç”¨å­—ç¬¦è®¡æ•°ï¼Ÿ
å­—ç¬¦åˆ†å—ç­–ç•¥ç¡®ä¿è·¨è¯­è¨€å…¬å¹³è®¡ç®—ï¼š
- è‹±è¯­ï¼šç©ºæ ¼æ˜¯å¿…è¦åˆ†è¯å…ƒç´ 
- ä¸­æ–‡ï¼šæå°‘ä½¿ç”¨åˆ†è¯ç©ºæ ¼
- æ··åˆå†…å®¹ï¼šæä¾›ç»Ÿä¸€åº¦é‡æ ‡å‡†
### Token ä¼°ç®—æŒ‡å—
| è¯­è¨€        | å­—ç¬¦æ•°       | Token ä¼°å€¼    | æ¨èåˆ†å—å¤§å°        |
|-------------|-------------|--------------|--------------------|
| è‹±è¯­        | 1000        | ~300 tokens  | 1200-1800 å­—ç¬¦     |
| ä¸­æ–‡        | 1000        | ~600 tokens  | 500-1000 å­—ç¬¦      |
| æ··åˆå†…å®¹    | 1000        | åŠ¨æ€å˜åŒ–       | 800-1200 å­—ç¬¦      |
**å®ç°ç»†èŠ‚ï¼š**
1. åˆ†å—å§‹ç»ˆåœ¨æ®µè½ç»“å°¾ï¼ˆ`\n\n`ï¼‰å¤„æ–­å¼€
2. å®é™…åˆ†å—å¤§å°å¯èƒ½æµ®åŠ¨
3. å‘½ä»¤è¡Œé¢„ä¼°å¸®åŠ©é¿å… API è¶…é¢
**é…ç½®ç¤ºä¾‹ï¼š**
```bash
# ä¸­æ–‡ä¸»å¯¼å†…å®¹
python -m chapter_rewriter.cli add-task --chunk-size 600 paper.md
# è‹±æ–‡æŠ€æœ¯æ–‡æ¡£
python -m chapter_rewriter.cli add-task --chunk-size 1500 thesis.txt
```
---
## ğŸ› ï¸ å®‰è£…æŒ‡å—
### å‰ç½®æ¡ä»¶
- Python 3.10 æˆ–æ›´é«˜
- pip (Python åŒ…ç®¡ç†å™¨)
### å¿«é€Ÿå®‰è£…
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Monthlyaway/intellirewrite.git
cd intellirewrite
# å®‰è£…ä¾èµ–
pip install -r requirements.txt
# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
```
ç¼–è¾‘ `.env` æ–‡ä»¶é…ç½® API å¯†é’¥ï¼š
```
API_KEY=ä½ çš„APIå¯†é’¥
BASE_URL=APIåŸºåœ°å€
```
## ğŸ“– ä½¿ç”¨è¯´æ˜
### åŸºç¡€ä½¿ç”¨
```bash
# æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—
python -m chapter_rewriter.cli add-task input.md
# å¤„ç†æ‰€æœ‰å¾…åŠä»»åŠ¡
python -m chapter_rewriter.cli process-tasks
```
## ğŸ“š æ”¯æŒæ ¼å¼
- **Markdown**ï¼š`.md`
- **çº¯æ–‡æœ¬**ï¼š`.txt`
âŒ **PDF**ï¼š`.pdf` (éœ€ä½¿ç”¨ [çŸ¿å·¥U](https://github.com/opendatalab/MinerU) æå–ä¸º Markdown)
### é«˜çº§é€‰é¡¹
```bash
# è‡ªå®šä¹‰åˆ†å—ä¸è®°å¿†çª—å£
python -m chapter_rewriter.cli add-task --chunk-size 300 --memory-size 3 input.md
# æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨
python -m chapter_rewriter.cli list-tasks
# æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…
python -m chapter_rewriter.cli show-task ä»»åŠ¡ID
```
è·å–å®Œæ•´å¸®åŠ©ï¼š
```bash
python -m chapter_rewriter.cli --help
python -m chapter_rewriter.cli add-task --help
python -m chapter_rewriter.cli process-tasks --help
python -m chapter_rewriter.cli list-tasks --help
python -m chapter_rewriter.cli show-task --help
```
### æ¸…ç†ç¼“å­˜
```bash
./clean.bat  # Windows ç”¨æˆ·
./clean.sh  # Linux ç”¨æˆ·
```
## ğŸ”§ é…ç½®è¯´æ˜
### ç¯å¢ƒå˜é‡
- `API_KEY`ï¼šAPI å¯†é’¥
- `BASE_URL`ï¼šAPI æ¥å£åœ°å€ï¼ˆå¯æ›´æ¢åœ°åŒºèŠ‚ç‚¹ï¼‰
- `MAX_TOKENS`ï¼šé™åˆ¶æ¨¡å‹å“åº”é•¿åº¦ï¼Œé»˜è®¤ 4096ã€‚ä½¿ç”¨ Deepseek-R1 æ—¶å»ºè®®è®¾ä¸º 8192
### ä»»åŠ¡å‚æ•°
å„ä»»åŠ¡ç‹¬ç«‹é…ç½®ï¼ˆä¿å­˜åœ¨ `task.json` ä¸­ï¼‰ï¼š
- `chunk_size`ï¼šæ–‡æœ¬åˆ†å—å¤§å°
- `memory_size`ï¼šä¸Šä¸‹æ–‡è®°å¿†çª—å£æ•°
## ğŸ™ è‡´è°¢
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„æ”¯æŒ
- è‡´æ•¬å¼€æºç¤¾åŒºçš„çµæ„Ÿå’Œå·¥å…·
---
<div align="center">
  <p>ä¸ºå…¨çƒå­¦ç”Ÿå’Œå†™ä½œè€…ç”¨å¿ƒæ‰“é€  â¤ï¸</p>
</div>